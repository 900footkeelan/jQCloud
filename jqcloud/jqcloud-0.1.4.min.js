/*
 * jQCloud Plugin for jQuery
 *
 * Version 0.1.4
 *
 * Copyright 2011, Luca Ongaro
 * Licensed under the MIT license.
 *
 * Date: Mon Feb 28 19:30:59 -0800 2011
 */
 (function($){$.fn.jQCloud=function(word_array,callback_function){var $this=this;var container_id=$this.attr('id');$this.addClass("wordcloud");var drawWordCloud=function(){var hitTest=function(elem,other_elems){var overlapping=function(a,b){if(Math.abs(2.0*a.offsetLeft+a.offsetWidth-2.0*b.offsetLeft-b.offsetWidth)<a.offsetWidth+b.offsetWidth){if(Math.abs(2.0*a.offsetTop+a.offsetHeight-2.0*b.offsetTop-b.offsetHeight)<a.offsetHeight+b.offsetHeight){return true;}} return false;};var i=0;for(i=0;i<other_elems.length;i++){if(overlapping(elem,other_elems[i])){return true;}} return false;};word_array.sort(function(a,b){if(a.weight<b.weight){return 1;}else if(a.weight>b.weight){return-1;}else{return 0;}});var step=2.0;var already_placed_words=[];var aspect_ratio=$this.width()/$this.height();var origin_x=$this.width()/2.0;var origin_y=$this.height()/2.0;$.each(word_array,function(index,word){var word_id=container_id+"_word_"+index;var word_selector="#"+word_id;var angle=6.28*Math.random();var radius=0.0;var weight=Math.round((word.weight-word_array[word_array.length-1].weight)/(word_array[0].weight-word_array[word_array.length-1].weight)*9.0)+1;var inner_html=word.url!==undefined?"<a href='"+word.url+"'>"+word.text+"</a></span>":word.text;$this.append("<span id='"+word_id+"' class='w"+weight+"' title='"+(word.title||"")+"'>"+inner_html+"</span>");var width=$(word_selector).width();var height=$(word_selector).height();var left=origin_x-width/2.0;var top=origin_y-height/2.0;$(word_selector).css("position","absolute");$(word_selector).css("left",left+"px");$(word_selector).css("top",top+"px");while(hitTest(document.getElementById(word_id),already_placed_words)){radius+=step;angle+=(index%2===0?1:-1)*step;left=origin_x+(radius*Math.cos(angle)-(width/2.0))*aspect_ratio;top=origin_y+radius*Math.sin(angle)-(height/2.0);$(word_selector).css('left',left+"px");$(word_selector).css('top',top+"px");} already_placed_words.push(document.getElementById(word_id));});if(typeof callback_function==='function'){callback_function.call(this);}};setTimeout(function(){drawWordCloud();},100);return this;};})(jQuery);